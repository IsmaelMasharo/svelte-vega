(globalThis.webpackChunksvelte_vega_demo=globalThis.webpackChunksvelte_vega_demo||[]).push([[179],{29180:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module=__webpack_require__.nmd(module),(0,__webpack_require__(66809).configure)([__webpack_require__(68870)],module,!1)},38503:(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,{parameters:()=>parameters});var client_api=__webpack_require__(88458),esm=__webpack_require__(49529),parameters={actions:{argTypesRegex:"^on[A-Z].*"}};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":case"argTypes":return esm.kg.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return(0,client_api.$9)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return(0,client_api.HZ)(loader,!1)}));case"parameters":return(0,client_api.h1)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return(0,client_api.My)(enhancer)}));case"globals":case"globalTypes":var v={};return v[key]=value,(0,client_api.h1)(v,!1);default:return console.log(key+" was not supported :( !")}}))},30808:(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__(66809)},87759:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ChangingSize:()=>ChangingSize,Demo:()=>Demo,Height300:()=>Height300,Width300:()=>Width300,default:()=>SvelteVegaDemo_stories});var internal=__webpack_require__(85799),Vega_svelte=__webpack_require__(46215),data1=__webpack_require__(3787);const spec1={$schema:"https://vega.github.io/schema/vega/v5.json",width:400,height:200,padding:{left:5,right:5,top:5,bottom:5},data:[{name:"table",values:[{category:"A",amount:28},{category:"B",amount:55},{category:"C",amount:43},{category:"D",amount:91},{category:"E",amount:81},{category:"F",amount:53},{category:"G",amount:19},{category:"H",amount:87}]}],signals:[{name:"tooltip",value:{},on:[{events:"rect:mouseover",update:"datum"},{events:"rect:mouseout",update:"{}"}]}],scales:[{name:"xscale",type:"band",domain:{data:"table",field:"category"},range:"width"},{name:"yscale",domain:{data:"table",field:"amount"},nice:!0,range:"height"}],axes:[{orient:"bottom",scale:"xscale"},{orient:"left",scale:"yscale"}],marks:[{type:"rect",from:{data:"table"},encode:{enter:{x:{scale:"xscale",field:"category",offset:1},width:{scale:"xscale",band:1,offset:-1},y:{scale:"yscale",field:"amount"},y2:{scale:"yscale",value:0}},update:{fill:{value:"steelblue"}},hover:{fill:{value:"red"}}}},{type:"text",encode:{enter:{align:{value:"center"},baseline:{value:"bottom"},fill:{value:"#333"}},update:{x:{scale:"xscale",signal:"tooltip.category",band:.5},y:{scale:"yscale",signal:"tooltip.amount",offset:-2},text:{signal:"tooltip.amount"},fillOpacity:[{test:"datum === tooltip",value:0},{value:1}]}}}]},spec2={$schema:"https://vega.github.io/schema/vega/v5.json",width:400,height:200,padding:{left:5,right:5,top:5,bottom:5},data:[{name:"table",values:[{category:"A",amount:28},{category:"B",amount:55},{category:"C",amount:43},{category:"D",amount:91},{category:"E",amount:81},{category:"F",amount:53},{category:"G",amount:19},{category:"H",amount:87}]}],signals:[{name:"tooltip",value:{},on:[{events:"rect:mouseover",update:"datum"},{events:"rect:mouseout",update:"{}"}]}],scales:[{name:"xscale",type:"band",domain:{data:"table",field:"category"},range:"width"},{name:"yscale",domain:{data:"table",field:"amount"},nice:!0,range:"height"}],axes:[{orient:"bottom",scale:"xscale"},{orient:"left",scale:"yscale"}],marks:[{type:"rect",from:{data:"table"},encode:{enter:{x:{scale:"xscale",field:"category",offset:10},width:{scale:"xscale",band:.5,offset:-1},y:{scale:"yscale",field:"amount"},y2:{scale:"yscale",value:0}},update:{fill:{value:"green"}},hover:{fill:{value:"yellow"}}}},{type:"text",encode:{enter:{align:{value:"center"},baseline:{value:"bottom"},fill:{value:"#333"}},update:{x:{scale:"xscale",signal:"tooltip.category",band:.5},y:{scale:"yscale",signal:"tooltip.amount",offset:-2},text:{signal:"tooltip.amount"},fillOpacity:[{test:"datum === tooltip",value:0},{value:1}]}}}]};function create_fragment(ctx){let main,div0,div0_style_value,t0,button0,t2,button1,t4,div2,h3,t7,vega,t8,div1,t9,code1,t10,current,mounted,dispose;return vega=new Vega_svelte.Z({props:{data:ctx[2],spec:ctx[3],options:ctx[0],signalListeners:ctx[4]}}),{c(){main=(0,internal.bG)("main"),div0=(0,internal.bG)("div"),div0.innerHTML='<iframe title="star" src="https://ghbtns.com/github-btn.html?user=vega&amp;repo=svelte-vega&amp;type=star&amp;count=true" frameborder="0" scrolling="0" width="100px" height="20px"></iframe>',t0=(0,internal.Dh)(),button0=(0,internal.bG)("button"),button0.textContent="Toggle Spec",t2=(0,internal.Dh)(),button1=(0,internal.bG)("button"),button1.textContent="Update Data",t4=(0,internal.Dh)(),div2=(0,internal.bG)("div"),h3=(0,internal.bG)("h3"),h3.innerHTML="<code>&lt;Vega&gt;</code> Svelte Component",t7=(0,internal.fL)("\n    Will recompile when spec changes and update when data changes.\n    "),(0,internal.YC)(vega.$$.fragment),t8=(0,internal.Dh)(),div1=(0,internal.bG)("div"),t9=(0,internal.fL)("Hover info: "),code1=(0,internal.bG)("code"),t10=(0,internal.fL)(ctx[1]),(0,internal.Lj)(div0,"style",div0_style_value="float: right"),(0,internal.Lj)(div2,"class","content svelte-xcbl4w")},m(target,anchor){(0,internal.$T)(target,main,anchor),(0,internal.R3)(main,div0),(0,internal.R3)(main,t0),(0,internal.R3)(main,button0),(0,internal.R3)(main,t2),(0,internal.R3)(main,button1),(0,internal.R3)(main,t4),(0,internal.R3)(main,div2),(0,internal.R3)(div2,h3),(0,internal.R3)(div2,t7),(0,internal.ye)(vega,div2,null),(0,internal.R3)(div2,t8),(0,internal.R3)(div2,div1),(0,internal.R3)(div1,t9),(0,internal.R3)(div1,code1),(0,internal.R3)(code1,t10),current=!0,mounted||(dispose=[(0,internal.oL)(button0,"click",ctx[5]),(0,internal.oL)(button1,"click",ctx[6])],mounted=!0)},p(ctx,[dirty]){const vega_changes={};4&dirty&&(vega_changes.data=ctx[2]),8&dirty&&(vega_changes.spec=ctx[3]),1&dirty&&(vega_changes.options=ctx[0]),vega.$set(vega_changes),(!current||2&dirty)&&(0,internal.rT)(t10,ctx[1])},i(local){current||((0,internal.Ui)(vega.$$.fragment,local),current=!0)},o(local){(0,internal.et)(vega.$$.fragment,local),current=!1},d(detaching){detaching&&(0,internal.og)(main),(0,internal.vp)(vega),mounted=!1,(0,internal.j7)(dispose)}}}function instance($$self,$$props,$$invalidate){let{options={}}=$$props,info="",data=data1,spec=spec1;const handlers={tooltip:(...args)=>$$invalidate(1,info=JSON.stringify(args))};return $$self.$$set=$$props=>{"options"in $$props&&$$invalidate(0,options=$$props.options)},[options,info,data,spec,handlers,function handleToggleSpec(){$$invalidate(3,spec=spec===spec1?spec2:spec1)},function handleUpdateData(){const table=[];for(let i=1;i<=20;i++)table.push({amount:Math.round(100*Math.random()),category:String.fromCharCode(65+i)});$$invalidate(2,data={table})}]}class SvelteVegaDemo extends internal.f_{constructor(options){super(),document.getElementById("svelte-xcbl4w-style")||function add_css(){var style=(0,internal.bG)("style");style.id="svelte-xcbl4w-style",style.textContent=".content.svelte-xcbl4w{display:flex;flex-direction:column}",(0,internal.R3)(document.head,style)}(),(0,internal.S1)(this,options,instance,create_fragment,internal.N8,{options:0})}}const SvelteVegaDemo_svelte=SvelteVegaDemo;var svelte=__webpack_require__(98515);function ChangingDimensionDemo_svelte_create_fragment(ctx){let main,div0,div0_style_value,t0,button0,t2,button1,t4,div2,h3,t7,vega,t8,div1,t9,code1,t10,current,mounted,dispose;return vega=new Vega_svelte.Z({props:{data:ctx[2],spec:ctx[3],options:ctx[0],signalListeners:ctx[4]}}),{c(){main=(0,internal.bG)("main"),div0=(0,internal.bG)("div"),div0.innerHTML='<iframe title="star" src="https://ghbtns.com/github-btn.html?user=vega&amp;repo=svelte-vega&amp;type=star&amp;count=true" frameborder="0" scrolling="0" width="100px" height="20px"></iframe>',t0=(0,internal.Dh)(),button0=(0,internal.bG)("button"),button0.textContent="Toggle Spec",t2=(0,internal.Dh)(),button1=(0,internal.bG)("button"),button1.textContent="Update Data",t4=(0,internal.Dh)(),div2=(0,internal.bG)("div"),h3=(0,internal.bG)("h3"),h3.innerHTML="<code>&lt;Vega&gt;</code> Svelte Component",t7=(0,internal.fL)("\n    Will recompile when spec changes and update when data changes.\n    "),(0,internal.YC)(vega.$$.fragment),t8=(0,internal.Dh)(),div1=(0,internal.bG)("div"),t9=(0,internal.fL)("Hover info: "),code1=(0,internal.bG)("code"),t10=(0,internal.fL)(ctx[1]),(0,internal.Lj)(div0,"style",div0_style_value="float: right"),(0,internal.Lj)(div2,"class","content svelte-xcbl4w")},m(target,anchor){(0,internal.$T)(target,main,anchor),(0,internal.R3)(main,div0),(0,internal.R3)(main,t0),(0,internal.R3)(main,button0),(0,internal.R3)(main,t2),(0,internal.R3)(main,button1),(0,internal.R3)(main,t4),(0,internal.R3)(main,div2),(0,internal.R3)(div2,h3),(0,internal.R3)(div2,t7),(0,internal.ye)(vega,div2,null),(0,internal.R3)(div2,t8),(0,internal.R3)(div2,div1),(0,internal.R3)(div1,t9),(0,internal.R3)(div1,code1),(0,internal.R3)(code1,t10),current=!0,mounted||(dispose=[(0,internal.oL)(button0,"click",ctx[5]),(0,internal.oL)(button1,"click",ctx[6])],mounted=!0)},p(ctx,[dirty]){const vega_changes={};4&dirty&&(vega_changes.data=ctx[2]),8&dirty&&(vega_changes.spec=ctx[3]),1&dirty&&(vega_changes.options=ctx[0]),vega.$set(vega_changes),(!current||2&dirty)&&(0,internal.rT)(t10,ctx[1])},i(local){current||((0,internal.Ui)(vega.$$.fragment,local),current=!0)},o(local){(0,internal.et)(vega.$$.fragment,local),current=!1},d(detaching){detaching&&(0,internal.og)(main),(0,internal.vp)(vega),mounted=!1,(0,internal.j7)(dispose)}}}function ChangingDimensionDemo_svelte_instance($$self,$$props,$$invalidate){let interval,options={width:100,height:100,padding:20},grow=!0,info="",data=data1,spec=spec1;const handlers={tooltip:(...args)=>$$invalidate(1,info=JSON.stringify(args))};return(0,svelte.H3)((()=>{interval=setInterval((()=>{$$invalidate(0,options=Object.assign(Object.assign({},options),{width:(options.width?options.width:0)+(grow?1:-1),height:(options.height?options.height:0)+(grow?1:-1)})),grow=grow&&(options.width?options.width:0)<400||!grow&&100===(options.width?options.width:0)}),10)})),(0,svelte.ev)((()=>{clearInterval(interval)})),[options,info,data,spec,handlers,function handleToggleSpec(){$$invalidate(3,spec=spec===spec1?spec2:spec1)},function handleUpdateData(){const table=[];for(let i=1;i<=20;i++)table.push({amount:Math.round(100*Math.random()),category:String.fromCharCode(65+i)});$$invalidate(2,data={table})}]}class ChangingDimensionDemo extends internal.f_{constructor(options){super(),document.getElementById("svelte-xcbl4w-style")||function ChangingDimensionDemo_svelte_add_css(){var style=(0,internal.bG)("style");style.id="svelte-xcbl4w-style",style.textContent=".content.svelte-xcbl4w{display:flex;flex-direction:column}",(0,internal.R3)(document.head,style)}(),(0,internal.S1)(this,options,ChangingDimensionDemo_svelte_instance,ChangingDimensionDemo_svelte_create_fragment,internal.N8,{})}}const ChangingDimensionDemo_svelte=ChangingDimensionDemo;function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const SvelteVegaDemo_stories={title:"svelte-vega/Vega",component:SvelteVegaDemo_svelte,argTypes:{}};var Template=function(_ref){var args=_extends({},_ref);return{Component:SvelteVegaDemo_svelte,props:args}},Demo=Template.bind({}),Width300=Template.bind({});Width300.args={options:{width:300}};var Height300=Template.bind({});Height300.args={options:{height:300}};var ChangingSize=function(_ref2){var args=_extends({},_ref2);return{Component:ChangingDimensionDemo_svelte,props:args}}.bind({})},32186:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Demo:()=>Demo,default:()=>SvelteVegaLiteDemo_stories});var internal=__webpack_require__(85799),Vega_svelte=__webpack_require__(46215),constants=__webpack_require__(40240);function create_fragment(ctx){let vega,current;return vega=new Vega_svelte.Z({props:{spec:ctx[0],data:ctx[1],signalListeners:ctx[2],onError:ctx[3],options:ctx[4]}}),vega.$on("onNewView",ctx[6]),{c(){(0,internal.YC)(vega.$$.fragment)},m(target,anchor){(0,internal.ye)(vega,target,anchor),current=!0},p(ctx,[dirty]){const vega_changes={};1&dirty&&(vega_changes.spec=ctx[0]),2&dirty&&(vega_changes.data=ctx[1]),4&dirty&&(vega_changes.signalListeners=ctx[2]),8&dirty&&(vega_changes.onError=ctx[3]),16&dirty&&(vega_changes.options=ctx[4]),vega.$set(vega_changes)},i(local){current||((0,internal.Ui)(vega.$$.fragment,local),current=!0)},o(local){(0,internal.et)(vega.$$.fragment,local),current=!1},d(detaching){(0,internal.vp)(vega,detaching)}}}function instance($$self,$$props,$$invalidate){let vegaLiteOptions,{spec}=$$props,{options={}}=$$props,{data={}}=$$props,{signalListeners={}}=$$props,{onError=constants.d}=$$props;return $$self.$$set=$$props=>{"spec"in $$props&&$$invalidate(0,spec=$$props.spec),"options"in $$props&&$$invalidate(5,options=$$props.options),"data"in $$props&&$$invalidate(1,data=$$props.data),"signalListeners"in $$props&&$$invalidate(2,signalListeners=$$props.signalListeners),"onError"in $$props&&$$invalidate(3,onError=$$props.onError)},$$self.$$.update=()=>{32&$$self.$$.dirty&&$$invalidate(4,vegaLiteOptions=Object.assign(Object.assign({},options),{mode:"vega-lite"}))},[spec,data,signalListeners,onError,vegaLiteOptions,options,function onNewView_handler(event){(0,internal.cK)($$self,event)}]}class VegaLite extends internal.f_{constructor(options){super(),(0,internal.S1)(this,options,instance,create_fragment,internal.N8,{spec:0,options:5,data:1,signalListeners:2,onError:3})}}const VegaLite_svelte=VegaLite;var data1=__webpack_require__(3787);function SvelteVegaLiteDemo_svelte_create_fragment(ctx){let main,div0,div0_style_value,t0,button,t2,div1,h3,t5,vegalite,current,mounted,dispose;return vegalite=new VegaLite_svelte({props:{data:ctx[1],spec:ctx[2],options:ctx[0]}}),{c(){main=(0,internal.bG)("main"),div0=(0,internal.bG)("div"),div0.innerHTML='<iframe title="star" src="https://ghbtns.com/github-btn.html?user=vega&amp;repo=svelte-vega&amp;type=star&amp;count=true" frameborder="0" scrolling="0" width="100px" height="20px"></iframe>',t0=(0,internal.Dh)(),button=(0,internal.bG)("button"),button.textContent="Update Data",t2=(0,internal.Dh)(),div1=(0,internal.bG)("div"),h3=(0,internal.bG)("h3"),h3.innerHTML="<code>&lt;VegaLite&gt;</code> Svelte Component",t5=(0,internal.fL)("\n    Will recompile when spec changes and update when data changes.\n    "),(0,internal.YC)(vegalite.$$.fragment),(0,internal.Lj)(div0,"style",div0_style_value="float: right"),(0,internal.Lj)(div1,"class","content svelte-xcbl4w")},m(target,anchor){(0,internal.$T)(target,main,anchor),(0,internal.R3)(main,div0),(0,internal.R3)(main,t0),(0,internal.R3)(main,button),(0,internal.R3)(main,t2),(0,internal.R3)(main,div1),(0,internal.R3)(div1,h3),(0,internal.R3)(div1,t5),(0,internal.ye)(vegalite,div1,null),current=!0,mounted||(dispose=(0,internal.oL)(button,"click",ctx[3]),mounted=!0)},p(ctx,[dirty]){const vegalite_changes={};2&dirty&&(vegalite_changes.data=ctx[1]),1&dirty&&(vegalite_changes.options=ctx[0]),vegalite.$set(vegalite_changes)},i(local){current||((0,internal.Ui)(vegalite.$$.fragment,local),current=!0)},o(local){(0,internal.et)(vegalite.$$.fragment,local),current=!1},d(detaching){detaching&&(0,internal.og)(main),(0,internal.vp)(vegalite),mounted=!1,dispose()}}}function SvelteVegaLiteDemo_svelte_instance($$self,$$props,$$invalidate){let{options={}}=$$props,data=data1;return $$self.$$set=$$props=>{"options"in $$props&&$$invalidate(0,options=$$props.options)},[options,data,{$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"A simple bar chart with embedded data.",data:{name:"table"},mark:"bar",encoding:{x:{field:"category",type:"nominal"},y:{field:"amount",type:"quantitative"}}},function handleUpdateData(){const table=[];for(let i=1;i<=20;i++)table.push({amount:Math.round(100*Math.random()),category:String.fromCharCode(65+i)});$$invalidate(1,data={table})}]}class SvelteVegaLiteDemo extends internal.f_{constructor(options){super(),document.getElementById("svelte-xcbl4w-style")||function add_css(){var style=(0,internal.bG)("style");style.id="svelte-xcbl4w-style",style.textContent=".content.svelte-xcbl4w{display:flex;flex-direction:column}",(0,internal.R3)(document.head,style)}(),(0,internal.S1)(this,options,SvelteVegaLiteDemo_svelte_instance,SvelteVegaLiteDemo_svelte_create_fragment,internal.N8,{options:0})}}const SvelteVegaLiteDemo_svelte=SvelteVegaLiteDemo,SvelteVegaLiteDemo_stories={title:"svelte-vega/VegaLite",component:SvelteVegaLiteDemo_svelte,argTypes:{}};var Demo=function(){return{Component:SvelteVegaLiteDemo_svelte}}.bind({})},40240:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{d:()=>NOOP});var NOOP=function(){}},46215:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>Vega_svelte});var internal=__webpack_require__(85799),svelte=__webpack_require__(98515),constants=__webpack_require__(40240),vega_embed_module=(__webpack_require__(6886),__webpack_require__(72583)),fast_deep_equal=__webpack_require__(69378),fast_deep_equal_default=__webpack_require__.n(fast_deep_equal);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function shallowEqual(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},aKeys=Object.keys(a),bKeys=Object.keys(b);return a===b||aKeys.length===bKeys.length&&aKeys.every((function(key){return a[key]===b[key]}))}function removeSignalListenersFromView(view,signalListeners){var signalNames=Object.keys(signalListeners);return signalNames.forEach((function(signalName){try{view.removeSignalListener(signalName,signalListeners[signalName])}catch(error){console.warn("Cannot remove invalid signal listener.",error)}})),signalNames.length>0}function addSignalListenersToView(view,signalListeners){var signalNames=Object.keys(signalListeners);return signalNames.forEach((function(signalName){try{view.addSignalListener(signalName,signalListeners[signalName])}catch(error){console.warn("Cannot add invalid signal listener.",error)}})),signalNames.length>0}function getUniqueFieldNames(objects){var fields=new Set;return objects.forEach((function(o){Object.keys(o).forEach((function(field){fields.add(field)}))})),fields}function combineSpecWithDimension(spec,options){var width=options.width,height=options.height;return void 0!==width&&void 0!==height?Object.assign({},spec,{width,height}):void 0!==width?Object.assign({},spec,{width}):void 0!==height?Object.assign({},spec,{height}):spec}function create_fragment(ctx){let div;return{c(){div=(0,internal.bG)("div")},m(target,anchor){(0,internal.$T)(target,div,anchor),ctx[9](div)},p:internal.ZT,i:internal.ZT,o:internal.ZT,d(detaching){detaching&&(0,internal.og)(div),ctx[9](null)}}}function instance($$self,$$props,$$invalidate){var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};let{options}=$$props,{spec}=$$props,{signalListeners={}}=$$props,{onError=constants.d}=$$props,{result}=$$props;const dispatch=(0,svelte.x)();let chartContainer,prevOptions={},prevSignalListeners={},prevSpec={};function createView(){return __awaiter(this,void 0,void 0,(function*(){const finalSpec=combineSpecWithDimension(spec,options);try{$$invalidate(1,result=yield(0,vega_embed_module.ZP)(chartContainer,finalSpec,options));const{view}=result;return addSignalListenersToView(view,signalListeners)&&view.runAsync(),function onNewView(view){dispatch("newView",{view})}(view),view}catch(e){!function handleError(error){return onError(error),void console.warn(error)}(e)}}))}function clearView(){result&&(result.finalize(),$$invalidate(1,result=void 0))}return(0,svelte.H3)((()=>__awaiter(void 0,void 0,void 0,(function*(){yield createView()})))),(0,svelte.ev)((()=>{clearView()})),$$self.$$set=$$props=>{"options"in $$props&&$$invalidate(2,options=$$props.options),"spec"in $$props&&$$invalidate(3,spec=$$props.spec),"signalListeners"in $$props&&$$invalidate(4,signalListeners=$$props.signalListeners),"onError"in $$props&&$$invalidate(5,onError=$$props.onError),"result"in $$props&&$$invalidate(1,result=$$props.result)},$$self.$$.update=()=>{if(478&$$self.$$.dirty){const fieldSet=getUniqueFieldNames([options,prevOptions]);if(fieldSet.delete("width"),fieldSet.delete("height"),Array.from(fieldSet).some((f=>options[f]!==prevOptions[f])))clearView(),createView();else{const specChanges=function computeSpecChanges(newSpec,oldSpec){if(newSpec===oldSpec)return!1;var changes={width:!1,height:!1,isExpensive:!1},fieldNames=getUniqueFieldNames([newSpec,oldSpec]);return!fieldNames.has("width")||"width"in newSpec&&"width"in oldSpec&&newSpec.width===oldSpec.width||("width"in newSpec&&"number"==typeof newSpec.width?changes.width=newSpec.width:changes.isExpensive=!0),!fieldNames.has("height")||"height"in newSpec&&"height"in oldSpec&&newSpec.height===oldSpec.height||("height"in newSpec&&"number"==typeof newSpec.height?changes.height=newSpec.height:changes.isExpensive=!0),fieldNames.delete("width"),fieldNames.delete("height"),_toConsumableArray(fieldNames).some((function(field){return!(field in newSpec)||!(field in oldSpec)||!fast_deep_equal_default()(newSpec[field],oldSpec[field])}))&&(changes.isExpensive=!0),!(!1===changes.width&&!1===changes.height&&!changes.isExpensive)&&changes}(combineSpecWithDimension(spec,options),combineSpecWithDimension(prevSpec,prevOptions)),newSignalListeners=signalListeners,oldSignalListeners=prevSignalListeners;if(specChanges){if(specChanges.isExpensive)clearView(),createView();else if(void 0!==result){const areSignalListenersChanged=!shallowEqual(newSignalListeners,oldSignalListeners),{view}=result;!1!==specChanges.width&&view.width(specChanges.width),!1!==specChanges.height&&view.height(specChanges.height),areSignalListenersChanged&&(oldSignalListeners&&removeSignalListenersFromView(view,oldSignalListeners),newSignalListeners&&addSignalListenersToView(view,newSignalListeners)),view.runAsync()}}else if(!shallowEqual(newSignalListeners,oldSignalListeners)&&void 0!==result){const{view}=result;oldSignalListeners&&removeSignalListenersFromView(view,oldSignalListeners),newSignalListeners&&addSignalListenersToView(view,newSignalListeners),view.runAsync()}}$$invalidate(6,prevOptions=options),$$invalidate(7,prevSignalListeners=signalListeners),$$invalidate(8,prevSpec=spec)}},[chartContainer,result,options,spec,signalListeners,onError,prevOptions,prevSignalListeners,prevSpec,function div_binding($$value){internal.Vn[$$value?"unshift":"push"]((()=>{chartContainer=$$value,$$invalidate(0,chartContainer)}))}]}class VegaEmbed extends internal.f_{constructor(options){super(),(0,internal.S1)(this,options,instance,create_fragment,internal.N8,{options:2,spec:3,signalListeners:4,onError:5,result:1})}}const VegaEmbed_svelte=VegaEmbed;function Vega_svelte_create_fragment(ctx){let vegaembed,updating_result,current;function vegaembed_result_binding(value){ctx[8](value)}let vegaembed_props={spec:ctx[0],options:ctx[1],onError:ctx[3],signalListeners:ctx[2]};return void 0!==ctx[4]&&(vegaembed_props.result=ctx[4]),vegaembed=new VegaEmbed_svelte({props:vegaembed_props}),internal.Vn.push((()=>(0,internal.ak)(vegaembed,"result",vegaembed_result_binding))),vegaembed.$on("newView",ctx[5]),{c(){(0,internal.YC)(vegaembed.$$.fragment)},m(target,anchor){(0,internal.ye)(vegaembed,target,anchor),current=!0},p(ctx,[dirty]){const vegaembed_changes={};1&dirty&&(vegaembed_changes.spec=ctx[0]),2&dirty&&(vegaembed_changes.options=ctx[1]),8&dirty&&(vegaembed_changes.onError=ctx[3]),4&dirty&&(vegaembed_changes.signalListeners=ctx[2]),!updating_result&&16&dirty&&(updating_result=!0,vegaembed_changes.result=ctx[4],(0,internal.hj)((()=>updating_result=!1))),vegaembed.$set(vegaembed_changes)},i(local){current||((0,internal.Ui)(vegaembed.$$.fragment,local),current=!0)},o(local){(0,internal.et)(vegaembed.$$.fragment,local),current=!1},d(detaching){(0,internal.vp)(vegaembed,detaching)}}}function Vega_svelte_instance($$self,$$props,$$invalidate){var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};let{spec}=$$props,{options={}}=$$props,{data={}}=$$props,{signalListeners={}}=$$props,{onError=constants.d}=$$props;const dispatch=(0,svelte.x)();let result,prevData={};function update(){return __awaiter(this,void 0,void 0,(function*(){if(data&&Object.keys(data).length>0&&void 0!==result){const{view}=result;!function updateMultipleDatasetsInView(view,data){Object.keys(data).forEach((function(name){var value=data[name];value&&(value&&"[object Function]"==={}.toString.call(value)?value(view.data(name)):view.change(name,vega_embed_module.OU.changeset().remove((function(){return!0})).insert(value)))}))}(view,data),yield view.resize().runAsync()}}))}return $$self.$$set=$$props=>{"spec"in $$props&&$$invalidate(0,spec=$$props.spec),"options"in $$props&&$$invalidate(1,options=$$props.options),"data"in $$props&&$$invalidate(6,data=$$props.data),"signalListeners"in $$props&&$$invalidate(2,signalListeners=$$props.signalListeners),"onError"in $$props&&$$invalidate(3,onError=$$props.onError)},$$self.$$.update=()=>{192&$$self.$$.dirty&&(shallowEqual(data,prevData)||update(),$$invalidate(7,prevData=data))},[spec,options,signalListeners,onError,result,function handleNewView(event){update(),dispatch("onNewView",{view:event.detail.view})},data,prevData,function vegaembed_result_binding(value){result=value,$$invalidate(4,result)}]}class Vega extends internal.f_{constructor(options){super(),(0,internal.S1)(this,options,Vega_svelte_instance,Vega_svelte_create_fragment,internal.N8,{spec:0,options:1,data:6,signalListeners:2,onError:3})}}const Vega_svelte=Vega},3787:module=>{"use strict";module.exports=JSON.parse('{"table":[{"category":"A","amount":28},{"category":"B","amount":55},{"category":"C","amount":43},{"category":"D","amount":91},{"category":"E","amount":81},{"category":"F","amount":53},{"category":"G","amount":19},{"category":"H","amount":87}]}')},68870:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./SvelteVegaDemo.stories.js":87759,"./SvelteVegaLiteDemo.stories.js":32186};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=68870},53260:()=>{}},__webpack_require__=>{"use strict";var __webpack_exec__=moduleId=>__webpack_require__(__webpack_require__.s=moduleId);__webpack_require__.O(0,[936],(()=>(__webpack_exec__(98612),__webpack_exec__(35350),__webpack_exec__(30808),__webpack_exec__(61021),__webpack_exec__(88900),__webpack_exec__(25622),__webpack_exec__(38503),__webpack_exec__(29180))));__webpack_require__.O()}]);
//# sourceMappingURL=main.0ace3008.iframe.bundle.js.map